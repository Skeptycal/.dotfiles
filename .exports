#!/usr/bin/env bash
# *############################################################################
# echo "sourcing script .exports"

# shellcheck disable=SC1090,SC1091,SC2034,SC2154 #
umask 022

# TODO
# alias t='./todo.sh -d /path/to/your/todo.cfg'
TODOTXT_DEFAULT_ACTION=ls
export TODOTXT_DEFAULT_ACTION
TODOTXT_SORT_COMMAND='env LC_COLLATE=C sort -k 2,2 -k 1,1n'
export TODOTXT_SORT_COMMAND
# System
export LANG='en_US.UTF-8'
export LC_ALL='en_US.UTF-8'
export CGO_ENABLED=1
SH_KEY_PATH="${HOME}/.ssh/rsa_id"
export SH_KEY_PATH
export LOCAL_IP=$(ipconfig getifaddr en0)
export LDFLAGS="-L/usr/local/opt/zlib/lib"
export CPPFLAGS="-I/usr/local/opt/zlib/include"
export PKG_CONFIG_PATH="/usr/local/opt/zlib/lib/pkgconfig"
export HISTSIZE='32768'
export HISTFILESIZE="${HISTSIZE}"
export HISTCONTROL='ignoreboth'

# Git
#* brew install bash-git-prompt
if [ -f "/usr/local/opt/bash-git-prompt/share/gitprompt.sh" ]; then
    __GIT_PROMPT_DIR="/usr/local/opt/bash-git-prompt/share"
    source "/usr/local/opt/bash-git-prompt/share/gitprompt.sh"
fi

# Appearance
#   iterm2 bash shell integration
test -e "$HOME/.iterm2_shell_integration.bash" && source "$HOME/.iterm2_shell_integration.bash"
export CLICOLOR=1
export colorflag='--color=always'
#   https://www.gnu.org/software/coreutils/manual/html_node/dircolors-invocation.html#dircolors-invocation
/usr/local/opt/coreutils/libexec/gnubin/dircolors -b &>/dev/null
WS=$(git config --get-color color.diff.whitespace "blue reverse")
RESET=$(git config --get-color "" "reset")
export WS
export RESET

# Python
export PYTHONIOENCODING='UTF-8'
#       python sucks ... virtual environments suck ...
#       someone should find a better way to do this ... it's so stupid
# WORKON_HOME="$HOME/.virtualenvs"
# export $WORKON_HOME
# PROJECT_HOME="$HOME/Documents/coding/"
# export $PROJECT_HOME
# source /usr/local/bin/virtualenvwrapper.sh
# Java
JAVA_HOME=$(/usr/libexec/java_home)
export JAVA_HOME
export M2_HOME="/usr/share/apache-maven-3.6.0"

# Node
export NODE_REPL_HISTORY="$HOME/.node_history"
export NODE_REPL_HISTORY_SIZE='32768'
export NODE_REPL_MODE='sloppy'

# Perl
PERL_MM_OPT="INSTALL_BASE=$HOME/perl5"
export PERL_MM_OPT
eval "$(perl -I"$HOME/perl5/lib/perl5" -Mlocal::lib="$HOME/perl5")"

# Heroku autocomplete setup
HEROKU_AC_BASH_SETUP_PATH=/Volumes/Data/skeptycal/Library/Caches/heroku/autocomplete/bash_setup && test -f $HEROKU_AC_BASH_SETUP_PATH && source $HEROKU_AC_BASH_SETUP_PATH

#* #############################################################################
#* Enable some Bash 4 features when possible:
#* Case-insensitive globbing (used in pathname expansion) : shopt -s nocaseglob;
#* Append to the Bash history file vs. overwriting it : shopt -s histappend;
#* Autocorrect typos in path names when using `cd` : shopt -s cdspell;
#* Autocd, e.g. `**/qux` will enter `./foo/bar/baz/qux`
#* Recursive globbing, e.g. `echo **/*.txt`
for option in nocaseglob histappend cdspell autocd globstar; do
    shopt -s "$option" &>/dev/null
done

################################################################################
# ! end original configuration
################################################################################
